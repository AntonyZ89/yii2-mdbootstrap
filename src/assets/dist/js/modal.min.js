$(function(){function tryParseJSON(a){try{var t=JSON.parse(a);if(t&&"object"==typeof t)return t}catch(a){}}$(document).on("click",".show-modal",function(){const a=$(this),t=$(a.attr("data-target")),o=(a.attr("data-url")||a.attr("href"))?.replace(/&?modal=1&?/g,""),e=a.attr("data-header")||"",r=t.find(".modal-header").find("h4"),n=a.attr("data-callback");if(n&&t.attr("data-callback",n),0===r.length?$("<h4>"+e+"</h4>").appendTo(t.find(".modal-header")):r.text(e),o){var c=t.modal("show").find(".modal-body").empty();return $.ajax({url:o,success:function(a){c.html(a),n&&c.find("form").attr("data-ajax",1)},error:function(a){c.html('<div class="error-summary">'+a.responseText+"</div>")},complete:function(){t.trigger("loaded.bs.modal"),mdb_helper.input.init()}}),!1}t.modal("show")}),$(document).on("submit","form[data-ajax]",function(event){event.preventDefault();const formData=new FormData(this),form=$(this),body=form.closest(".modal-body"),modal=form.closest(".modal");let action=form.attr("action");return body.empty(),action.includes("?")?action+="&modal=1":action+="?modal=1",console.log({action:action}),$.ajax({url:action,type:"post",enctype:"multipart/form-data",processData:!1,contentType:!1,data:formData,success:function(response){response.success?modal.modal("hide"):body.html(response);const callback=modal.attr("data-callback");callback&&eval(`typeof ${callback} === 'function'`)&&eval(callback)(response)},error:function(a,t,o){body.html('<div class="error-summary">'+a.responseText+"</div>")},complete:function(){modal.removeAttr("data-callback")}}),!1}),$("body").on("click","a[data-ajax]",function(){var a=$(this),t=a.closest(".modal-body").empty();return $.ajax({url:a.attr("href"),success:function(a){t.html(a)},error:function(a){t.html('<div class="error-summary">'+a.responseText+"</div>")}}),!1})});